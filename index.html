<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TP Final Simulación</title>
    <link href="bower_components//bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link href="src/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
    <link href="bower_components/rangeslider.js/dist/rangeslider.css" rel="stylesheet">

</head>

<body>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="bower_components/plotlyjs/plotly.js"></script>
    <script src="bower_components/rangeslider.js/dist/rangeslider.js"></script>
    <!-- <script>
        function showConsole(value) {
            console.log(value);
        }
    </script> -->


    <section id="header">
        <div class="row row-title">
            <div class="col">
                <h1 class="title">Calculadora de inversiones</h1>
            </div>
        </div>
        <div class="row row-belowtitle"></div>
    </section>
    <section class="container-fluid">
        <div class="row">
            <div class="col-4">
                <h2 class="alt-title offset-1">Opciones</h2>
                <div class="slider">

                    <div class="row">
                        <div class="col-11 offset-1">
                            <p>Monto a invertir (pesos)</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 offset-1">
                            <input type="range" min="1000" max="1000000" value="50000" step="1000" data-rangeslider>
                        </div>
                        <div class="col-4">
                            <input type="number" id="" class="form-control output cambiar">
                        </div>
                    </div>
                </div>
                <div class="slider">
                    <div class="row">
                        <div class="col-11 offset-1">
                            <p>Plazo de inversiones (meses)</p>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-4 offset-1">
                            <input type="range" class="" min="1" max="120" value="12" data-rangeslider>
                        </div>
                        <div class="col-4">
                            <input type="number" id="" class="form-control output cambiar">
                        </div>
                    </div>
                </div>

                <div class="row">

                    <div class="col-6 offset-1">
                        <h2 class="alt-title">Alternativas</h2>
                        <p>
                            <input type="checkbox" checked="checked" class="checkbox">
                            <label>Dólares</label>
                        </p>
                        <p>
                            <input type="checkbox" class="checkbox " checked="checked">
                            <label>LEBAC</label>
                        </p>
                        <p>
                            <input type="checkbox" class="checkbox " checked="checked">
                            <label>Fondos de Inversión</label>
                        </p>
                        <p>
                            <input type="checkbox" class="checkbox " checked="checked">
                            <label>Plazo Fijo</label>
                        </p>

                    </div>
                </div>
                <div class="row">
                    <div class="col-4 offset-2">
                        <p>
                            <button class="btn-primary btn-mati">Calcular</button>
                        </p>

                    </div>
                </div>
                <div class="row">
                    <div class="col-4 offset-2">
                        <p>
                            <button class="btn-primary btn-mati">Crisis!</button>
                        </p>

                    </div>
                </div>
            </div>
            <div class="col800 col-8" id="myDiv"></div>
        </div>

    </section>




    <script>
        $(function () {
            var $document = $(document);
            var selector = '[data-rangeslider]';
            var $element = $(selector);
            // For ie8 support
            var textContent = ('textContent' in document) ? 'textContent' : 'value';

            function valueOutput(element) {
                var value = element.value;
                var output = element.parentNode.getElementsByClassName('output')[0] || element.parentNode.parentNode.getElementsByClassName('output')[0];
                output.value = value;
            }

            $('.cambiar').on('change', function (item) {
                var range1 = item.currentTarget.parentElement.parentElement.children[0].children[0];
                var $inputRange = $(range1);
                var value = item.currentTarget.value;
                $inputRange.val(value).change();
            })

            // $document.on('change', '#cantMeses input', function (e) {
            //     var $inputRange = $(selector, e.target.parentNode);
            //     var value = $('input[type="number"]', e.target.parentNode)[0].value;
            //     console.log(value);
            //     $inputRange.val(value).change();
            // });


            // Basic rangeslider initialization
            $element.rangeslider({
                // Deactivate the feature detection
                polyfill: false,
                rangeClass: 'rangeslider-1',
                disabledClass: 'rangeslider--disabled-1',
                horizontalClass: 'rangeslider--horizontal-1',
                verticalClass: 'rangeslider--vertical-1',
                fillClass: 'rangeslider__fill-1',
                handleClass: 'rangeslider__handle-1',

                // Callback function
                onInit: function () {
                    valueOutput(this.$element[0]);
                },
                // Callback function
                onSlide: function (position, value) {
                    console.log('onSlide');
                    console.log('position: ' + position, 'value: ' + value);
                    valueOutput(this.$element[0]);
                },
                // Callback function
                onSlideEnd: function (position, value) {
                    console.log('onSlideEnd');
                    console.log('position: ' + position, 'value: ' + value);
                }
            });
        });




        $.ajax({
            //async: false,
            url: "http://localhost:3000/datos",
            type: "get",
            contentType: "application/json; charset=utf-8",
            datatype: "jsonp",
            success: function (result) {
                Plotly.newPlot('myDiv', result);
            }

        });   
    </script>
</body>

</html>